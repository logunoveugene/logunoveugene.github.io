!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1075)}({1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.SCREEN_NOT_SUPPORTED=0]="SCREEN_NOT_SUPPORTED",e[e.SCREEN_WIDE=1]="SCREEN_WIDE",e[e.SCREEN_DESKTOP=2]="SCREEN_DESKTOP",e[e.SCREEN_TABLET=3]="SCREEN_TABLET",e[e.SCREEN_MOBILE=4]="SCREEN_MOBILE"}(t.ScreenTypes||(t.ScreenTypes={}))},1075:function(e,t,n){e.exports=n(1076)},1076:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),s=i(n(1077)),r=n(480),E=function(){[].slice.call(document.querySelectorAll(r.OffersInCategoryEnum.OFFER_BLOCK_SELECTOR)).forEach(function(e){e.hasAttribute("data-inited")||(e.setAttribute("data-inited",""),new s.default(e).init())})};E(),o.Dom_onDocumentReady(E)},1077:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(9),s=n(480),r=n(1078),E=function(){function e(e){var t=this;this.showingLinesCount=1,this.desktopInited=!1,this.mobileInited=!1,this.closeAll=function(){t.showingLinesCount=s.OffersInCategoryEnum.DEFAULT_SHOW_LINES_COUNT,t.desktopOutStatus=r.OffersInCategoryState.DESKTOP_STATUS_COLLAPSED,t.initDesktopPresentation()},this.offerBlock=e,this.desktopHideAllTop=this.offerBlock.querySelector(s.OffersInCategoryEnum.LINK_DESKTOP_HIDE_ALL_TOP_SELECTOR),this.desktopHideAllBottom=this.offerBlock.querySelector(s.OffersInCategoryEnum.LINK_DESKTOP_HIDE_ALL_BOTTOM_SELECTOR),this.desktopShowAll=this.offerBlock.querySelector(s.OffersInCategoryEnum.LINK_DESKTOP_SHOW_ALL_SELECTOR),this.desktopShowMore=this.offerBlock.querySelector(s.OffersInCategoryEnum.LINK_DESKTOP_SHOW_MORE_SELECTOR),this.recommendationButton=this.offerBlock.querySelector(s.OffersInCategoryEnum.OFFERS_EXPAND_BUTTON_SELECTOR),this.screenTypeHelper=new o.ScreenTypeHelper}return e.prototype.init=function(){if(this.initDesktopElements(),this.initMobileElements(),!this.offerBlock.hasAttribute("data-inited")){this.offerBlock.setAttribute("data-inited","");var e=window.currentOfferId||null,t=window.currentOfferTitle||null,n=window.currentOfferRealCategoryUrl||null;if(null!==e&&null!==t){var o=this.offerBlock.querySelector('[data-id="'+e+'"]');if(null!==o){var r=this.offerBlock.querySelector(s.OffersInCategoryEnum.INNER_BLOCK_SELECTOR),E=o.querySelector("a");E.setAttribute("href",n),o.classList.add("is-active"),this.screenTypeHelper.check(i.ScreenTypes.SCREEN_DESKTOP,i.ScreenTypes.SCREEN_WIDE)?(E.innerHTML=E.innerHTML+'<span class="leave-category"></span>',E.setAttribute("href",n),r.insertBefore(o,r.firstChild)):(E.innerHTML=E.innerHTML+'<span class="leave-category-mobile"></span>',E.setAttribute("href",n)),this.offerBlock.querySelector(s.OffersInCategoryEnum.OFFERS_EXPAND_BUTTON_CONTAINER_SELECTOR).classList.add("has-active-offer"),this.offerBlock.querySelector(s.OffersInCategoryEnum.ACTIVE_OFFER_EXPAND_TITLE_SELECTOR).innerHTML=t}}}},e.prototype.initMobileElements=function(){if(!0!==this.mobileInited&&!1!==this.screenTypeHelper.check(i.ScreenTypes.SCREEN_TABLET,i.ScreenTypes.SCREEN_MOBILE)){var e=document.querySelector('[data-role="mobile-offers-container"]');if(null!==e&&null!==this.offerBlock.querySelector(s.OffersInCategoryEnum.OFFERS_EXPAND_BUTTON_SELECTOR)){this.mobileInited=!0;var t=this.offerBlock.cloneNode(!0);e.appendChild(t),t.querySelector(s.OffersInCategoryEnum.OFFERS_EXPAND_BUTTON_SELECTOR).addEventListener("click",function(){t.classList.toggle("mobile-collapsed")});var n=[].slice.call(t.querySelectorAll(s.OffersInCategoryEnum.OFFER_ITEM_SELECTOR));n.length>s.OffersInCategoryEnum.MOBILE_OFFERS_COLLAPSED_LIMIT&&n.slice(s.OffersInCategoryEnum.MOBILE_OFFERS_COLLAPSED_LIMIT).forEach(function(e){e.classList.add("mobile-hidden")});var o=t.querySelector(s.OffersInCategoryEnum.LINK_MOBILE_SHOW_MORE_SELECTOR);0===n.filter(function(e){return e.classList.contains("mobile-hidden")}).length?o.classList.add("mobile-hidden"):o.addEventListener("click",function(){return n.filter(function(e){return e.classList.contains("mobile-hidden")}).slice(0,s.OffersInCategoryEnum.MOBILE_OFFERS_COLLAPSED_LIMIT).forEach(function(e){e.classList.remove("mobile-hidden")}),0===n.filter(function(e){return e.classList.contains("mobile-hidden")}).length&&o.classList.add("mobile-hidden"),n.length>n.filter(function(e){return e.classList.contains("mobile-hidden")}).length&&r.classList.remove("mobile-hidden"),!1});var r=t.querySelector(s.OffersInCategoryEnum.LINK_MOBILE_HIDE_SELECTOR);n.length===n.filter(function(e){return e.classList.contains("mobile-hidden")}).length?r.classList.add("mobile-hidden"):r.addEventListener("click",function(){return n.forEach(function(e){e.classList.add("mobile-hidden")}),n.length===n.filter(function(e){return e.classList.contains("mobile-hidden")}).length&&r.classList.add("mobile-hidden"),0!==n.filter(function(e){return e.classList.contains("mobile-hidden")}).length&&o.classList.remove("mobile-hidden"),!1}),t.style.height="auto"}}},e.prototype.initDesktopElements=function(){var e=this;!0!==this.desktopInited&&(this.desktopInited=!0,this.desktopShowMore.addEventListener("click",function(){return e.desktopOutStatus=r.OffersInCategoryState.DESKTOP_STATUS_PARTLY_EXPANDED,e.showingLinesCount+=s.OffersInCategoryEnum.SHOW_MORE_LINES_COUNT,e.desktopTotalLinesCount-e.showingLinesCount<s.OffersInCategoryEnum.SHOW_MORE_LINES_COUNT&&(e.desktopOutStatus=r.OffersInCategoryState.DESKTOP_STATUS_FULLY_EXPANDED,e.showingLinesCount=e.desktopTotalLinesCount),e.initDesktopPresentation(),!1}),this.desktopShowAll.addEventListener("click",function(){return e.showingLinesCount=e.desktopTotalLinesCount,e.desktopOutStatus=r.OffersInCategoryState.DESKTOP_STATUS_FULLY_EXPANDED,e.initDesktopPresentation(),!1}),this.desktopHideAllTop.addEventListener("click",function(){return e.desktopOutStatus=r.OffersInCategoryState.DESKTOP_STATUS_COLLAPSED,e.showingLinesCount=s.OffersInCategoryEnum.DEFAULT_SHOW_LINES_COUNT,e.initDesktopPresentation(),!1}),this.desktopHideAllTop.addEventListener("click",this.closeAll),this.desktopHideAllBottom.addEventListener("click",this.closeAll),this.desktopOutStatus=r.OffersInCategoryState.DESKTOP_STATUS_COLLAPSED,this.offerBlock.classList.remove("desktop-collapsed"),this.screenTypeHelper.check(i.ScreenTypes.SCREEN_TABLET,i.ScreenTypes.SCREEN_DESKTOP,i.ScreenTypes.SCREEN_WIDE)&&(this.initEnvironment(),this.initDesktopPresentation()),this.screenTypeHelper.addChangeScreenTypeListener(function(){e.initEnvironment(),e.screenTypeHelper.check(i.ScreenTypes.SCREEN_DESKTOP,i.ScreenTypes.SCREEN_WIDE)?e.initDesktopPresentation():e.initMobileElements()}))},e.prototype.initDesktopPresentation=function(){var e=this;this.showingLinesCount>=this.desktopTotalLinesCount?this.offerBlock.style.height="auto":this.offerBlock.style.height=(this.desktopOfferHeight*this.showingLinesCount).toString()+"px";var t=[].slice.call(this.offerBlock.querySelectorAll(s.OffersInCategoryEnum.OFFER_ITEM_SELECTOR)),n=this.offerBlock.querySelector(s.OffersInCategoryEnum.INNER_BLOCK_SELECTOR);switch(this.desktopOutStatus){case r.OffersInCategoryState.DESKTOP_STATUS_COLLAPSED:this.offerBlock.clientHeight<this.desktopBlockFullHeight&&(this.desktopHideAllTop.classList.add("hidden"),this.desktopShowAll.classList.add("hidden"),this.desktopShowMore.classList.remove("hidden"),n.insertBefore(this.desktopShowMore,t[0]),this.desktopHideAllBottom.classList.add("hidden"));break;case r.OffersInCategoryState.DESKTOP_STATUS_PARTLY_EXPANDED:var i=null,o=this.offerBlock.offsetTop;if(t.every(function(n,s){var r=n.offsetTop-o;return!(Math.ceil(r/e.desktopOfferHeight)+1>e.showingLinesCount+1)||(i=t[s-1],!1)}),null!==i){var E=getComputedStyle(this.desktopShowMore),l=getComputedStyle(this.desktopShowAll),a=getComputedStyle(this.desktopShowAll),c=parseInt(E.height,10)+parseInt(E.marginTop,10)+parseInt(E.marginBottom,10),_=parseInt(l.height,10)+parseInt(l.marginTop,10)+parseInt(l.marginBottom,10);parseInt(a.height,10)+parseInt(a.marginTop,10)+parseInt(a.marginBottom,10)<c+_?n.insertBefore(this.desktopShowMore,i):n.insertBefore(this.desktopShowMore,i.previousElementSibling)}else n.insertBefore(this.desktopShowMore,t[t.length-1]);this.desktopShowAll.classList.remove("hidden"),n.insertBefore(this.desktopShowAll,this.desktopShowMore),this.desktopHideAllTop.classList.remove("hidden");break;case r.OffersInCategoryState.DESKTOP_STATUS_FULLY_EXPANDED:this.desktopShowAll.classList.add("hidden"),this.desktopShowMore.classList.add("hidden"),this.desktopHideAllBottom.classList.remove("hidden"),n.insertBefore(this.desktopHideAllBottom,t[t.length-1].nextSibling)}},e.prototype.initEnvironment=function(){var e=getComputedStyle(this.offerBlock.querySelector(s.OffersInCategoryEnum.OFFER_ITEM_SELECTOR));this.desktopBlockFullHeight=this.offerBlock.querySelector(s.OffersInCategoryEnum.INNER_BLOCK_SELECTOR).getBoundingClientRect().height,this.desktopOfferHeight=parseInt(e.height,10)+parseInt(e.marginTop,10)+parseInt(e.marginBottom,10),this.desktopOutStatus!==r.OffersInCategoryState.DESKTOP_STATUS_FULLY_EXPANDED&&(this.desktopTotalLinesCount=Math.ceil(this.desktopBlockFullHeight/this.desktopOfferHeight),this.showingLinesCount>this.desktopTotalLinesCount&&(this.showingLinesCount=this.desktopTotalLinesCount))},e}();t.default=E},1078:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.DESKTOP_STATUS_COLLAPSED=1]="DESKTOP_STATUS_COLLAPSED",e[e.DESKTOP_STATUS_PARTLY_EXPANDED=2]="DESKTOP_STATUS_PARTLY_EXPANDED",e[e.DESKTOP_STATUS_FULLY_EXPANDED=3]="DESKTOP_STATUS_FULLY_EXPANDED"}(t.OffersInCategoryState||(t.OffersInCategoryState={}))},480:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.OFFER_BLOCK_SELECTOR="[data-role=offer-representation-in-category]",e.INNER_BLOCK_SELECTOR="[data-role=inner-block]",e.LINK_DESKTOP_HIDE_ALL_TOP_SELECTOR="[data-role=desktop-hide-all-top]",e.LINK_DESKTOP_HIDE_ALL_BOTTOM_SELECTOR="[data-role=desktop-hide-all-bottom]",e.LINK_DESKTOP_SHOW_MORE_SELECTOR="[data-role=desktop-show-more]",e.LINK_MOBILE_SHOW_MORE_SELECTOR="[data-role=mobile-show-more]",e.LINK_MOBILE_HIDE_SELECTOR="[data-role=mobile-hide-btn]",e.LINK_DESKTOP_SHOW_ALL_SELECTOR="[data-role=desktop-show-all]",e.OFFER_ITEM_SELECTOR="[data-role=offer-item]",e.OFFERS_EXPAND_BUTTON_SELECTOR="[data-role=mobile-offers-expand]",e.OFFERS_EXPAND_BUTTON_CONTAINER_SELECTOR='[data-role="mobile-offers-expand-container"]',e.ACTIVE_OFFER_EXPAND_TITLE_SELECTOR='[data-role="active-offer-expand-title"]',e[e.MOBILE_OFFERS_COLLAPSED_LIMIT=6]="MOBILE_OFFERS_COLLAPSED_LIMIT",e[e.SHOW_MORE_LINES_COUNT=3]="SHOW_MORE_LINES_COUNT",e[e.DEFAULT_SHOW_LINES_COUNT=1]="DEFAULT_SHOW_LINES_COUNT"}(t.OffersInCategoryEnum||(t.OffersInCategoryEnum={}))},5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dom_onDocumentReady=function(e){document.addEventListener("DOMContentLoaded",e)}},9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=function(){function e(){var e=this;this.SCREEN_MOBILE_MIN_WIDTH=320,this.SCREEN_MOBILE_MAX_WIDTH=767,this.SCREEN_TABLET_MAX_WIDTH=991,this.SCREEN_DESKTOP_MAX_WIDTH=1199,this.EVENT_RESIZE="resize",this.EVENT_OPTIMIZED_RESIZE="optimizedResize",this.EVENT_SCREEN_TYPE_CHANGED="screenTypeChanged",this._currentScreenType=null,this.optimizeResizeEvent=function(t){var n=!1;(t=t||window).addEventListener(e.EVENT_RESIZE,function(){n||(n=!0,requestAnimationFrame(function(){t.dispatchEvent(new CustomEvent(e.EVENT_OPTIMIZED_RESIZE));var i=e.calcCurrent();e._currentScreenType!==i&&(e._currentScreenType=i,t.dispatchEvent(new CustomEvent(e.EVENT_SCREEN_TYPE_CHANGED))),n=!1}))})}}return Object.defineProperty(e.prototype,"current",{get:function(){return null===this._currentScreenType&&(this._currentScreenType=this.calcCurrent()),this._currentScreenType},enumerable:!0,configurable:!0}),e.prototype.calcCurrent=function(){var e=window.matchMedia;if(e){if(e("(min-width: "+(this.SCREEN_DESKTOP_MAX_WIDTH+1)+"px)").matches)return i.ScreenTypes.SCREEN_WIDE;if(e("(min-width: "+(this.SCREEN_TABLET_MAX_WIDTH+1)+"px)").matches)return i.ScreenTypes.SCREEN_DESKTOP;if(e("(min-width: "+(this.SCREEN_MOBILE_MAX_WIDTH+1)+"px)").matches)return i.ScreenTypes.SCREEN_TABLET;if(e("(min-width: "+(this.SCREEN_MOBILE_MIN_WIDTH+1)+"px)").matches)return i.ScreenTypes.SCREEN_MOBILE}else{var t=window.innerWidth;if(t>this.SCREEN_DESKTOP_MAX_WIDTH)return i.ScreenTypes.SCREEN_WIDE;if(t>this.SCREEN_TABLET_MAX_WIDTH)return i.ScreenTypes.SCREEN_DESKTOP;if(t>this.SCREEN_MOBILE_MAX_WIDTH)return i.ScreenTypes.SCREEN_TABLET;if(t>=this.SCREEN_MOBILE_MIN_WIDTH)return i.ScreenTypes.SCREEN_MOBILE}return i.ScreenTypes.SCREEN_NOT_SUPPORTED},e.prototype.check=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,i=e;n<i.length;n++){if(i[n]===this.current)return!0}return!1},e.prototype.addResizeListener=function(e){this.optimizeResizeEvent(window),window.addEventListener(this.EVENT_OPTIMIZED_RESIZE,e)},e.prototype.removeResizeListener=function(e){window.removeEventListener(this.EVENT_OPTIMIZED_RESIZE,e)},e.prototype.addChangeScreenTypeListener=function(e){this.optimizeResizeEvent(window),window.addEventListener(this.EVENT_SCREEN_TYPE_CHANGED,e)},e.prototype.removeChangeScreenTypeListener=function(e){window.removeEventListener(this.EVENT_SCREEN_TYPE_CHANGED,e)},e}();t.ScreenTypeHelper=o}});