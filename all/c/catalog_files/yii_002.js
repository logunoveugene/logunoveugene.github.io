yii.validation=function(h){function k(a,d,b){if("undefined"===typeof File)return[];a=h(a.input,a.$form).get(0);if("undefined"===typeof a)return[];a=a.files;return a?0===a.length?(b.skipOnEmpty||d.push(b.uploadRequired),[]):b.maxFiles&&b.maxFiles<a.length?(d.push(b.tooMany),[]):a:(d.push(b.message),[])}function l(a,d,b){if(b.extensions&&0<b.extensions.length){var c=a.name.lastIndexOf(".");c=~c?a.name.substr(c+1,a.name.length).toLowerCase():"";~b.extensions.indexOf(c)||d.push(b.wrongExtension.replace(/\{file\}/g,
a.name))}if(b.mimeTypes&&0<b.mimeTypes.length){a:{c=b.mimeTypes;for(var e=a.type,f=0,h=c.length;f<h;f++)if((new RegExp(c[f])).test(e)){c=!0;break a}c=!1}c||d.push(b.wrongMimeType.replace(/\{file\}/g,a.name))}b.maxSize&&b.maxSize<a.size&&d.push(b.tooBig.replace(/\{file\}/g,a.name));b.minSize&&b.minSize>a.size&&d.push(b.tooSmall.replace(/\{file\}/g,a.name))}var e={isEmpty:function(a){return null===a||void 0===a||h.isArray(a)&&0===a.length||""===a},addMessage:function(a,d,b){a.push(d.replace(/\{value\}/g,
b))},required:function(a,d,b){var c=!1;if(void 0===b.requiredValue){var g="string"==typeof a||a instanceof String;if(b.strict&&void 0!==a||!b.strict&&!e.isEmpty(g?h.trim(a):a))c=!0}else if(!b.strict&&a==b.requiredValue||b.strict&&a===b.requiredValue)c=!0;c||e.addMessage(d,b.message,a)},"boolean":function(a,d,b){b.skipOnEmpty&&e.isEmpty(a)||(b.strict||a!=b.trueValue&&a!=b.falseValue)&&(!b.strict||a!==b.trueValue&&a!==b.falseValue)&&e.addMessage(d,b.message,a)},string:function(a,d,b){b.skipOnEmpty&&
e.isEmpty(a)||("string"!==typeof a?e.addMessage(d,b.message,a):void 0!==b.is&&a.length!=b.is?e.addMessage(d,b.notEqual,a):(void 0!==b.min&&a.length<b.min&&e.addMessage(d,b.tooShort,a),void 0!==b.max&&a.length>b.max&&e.addMessage(d,b.tooLong,a)))},file:function(a,d,b){a=k(a,d,b);h.each(a,function(a,e){l(e,d,b)})},image:function(a,d,b,c){a=k(a,d,b);h.each(a,function(a,f){l(f,d,b);if("undefined"!==typeof FileReader){var g=h.Deferred();e.validateImage(f,d,b,g,new FileReader,new Image);c.push(g)}})},validateImage:function(a,
d,b,c,e,f){f.onload=function(){b.minWidth&&f.width<b.minWidth&&d.push(b.underWidth.replace(/\{file\}/g,a.name));b.maxWidth&&f.width>b.maxWidth&&d.push(b.overWidth.replace(/\{file\}/g,a.name));b.minHeight&&f.height<b.minHeight&&d.push(b.underHeight.replace(/\{file\}/g,a.name));b.maxHeight&&f.height>b.maxHeight&&d.push(b.overHeight.replace(/\{file\}/g,a.name));c.resolve()};f.onerror=function(){d.push(b.notImage.replace(/\{file\}/g,a.name));c.resolve()};e.onload=function(){f.src=this.result};e.onerror=
function(){c.resolve()};e.readAsDataURL(a)},number:function(a,d,b){b.skipOnEmpty&&e.isEmpty(a)||("string"!==typeof a||b.pattern.test(a)?(void 0!==b.min&&a<b.min&&e.addMessage(d,b.tooSmall,a),void 0!==b.max&&a>b.max&&e.addMessage(d,b.tooBig,a)):e.addMessage(d,b.message,a))},range:function(a,d,b){if(!b.skipOnEmpty||!e.isEmpty(a))if(!b.allowArray&&h.isArray(a))e.addMessage(d,b.message,a);else{var c=!0;h.each(h.isArray(a)?a:[a],function(a,d){return-1==h.inArray(d,b.range)?c=!1:!0});void 0===b.not&&(b.not=
!1);b.not===c&&e.addMessage(d,b.message,a)}},regularExpression:function(a,d,b){b.skipOnEmpty&&e.isEmpty(a)||(!b.not&&!b.pattern.test(a)||b.not&&b.pattern.test(a))&&e.addMessage(d,b.message,a)},email:function(a,d,b){if(!b.skipOnEmpty||!e.isEmpty(a)){var c=/^((?:"?([^"]*)"?\s)?)(?:\s+)?(?:(<?)((.+)@([^>]+))(>?))$/.exec(a);if(null===c)c=!1;else{var g=c[5],f=c[6];b.enableIDN&&(g=punycode.toASCII(g),f=punycode.toASCII(f),a=c[1]+c[3]+g+"@"+f+c[7]);c=64<g.length?!1:254<(g+"@"+f).length?!1:b.pattern.test(a)||
b.allowName&&b.fullPattern.test(a)}c||e.addMessage(d,b.message,a)}},url:function(a,d,b){if(!b.skipOnEmpty||!e.isEmpty(a)){b.defaultScheme&&!/:\/\//.test(a)&&(a=b.defaultScheme+"://"+a);var c=!0;if(b.enableIDN){var g=/^([^:]+):\/\/([^\/]+)(.*)$/.exec(a);null===g?c=!1:a=g[1]+"://"+punycode.toASCII(g[2])+g[3]}c&&b.pattern.test(a)||e.addMessage(d,b.message,a)}},trim:function(a,d,b,c){a=a.find(d.input);if(a.is(":checkbox, :radio"))return c;c=a.val();b.skipOnEmpty&&e.isEmpty(c)||(c=h.trim(c),a.val(c));
return c},captcha:function(a,d,b){if(!b.skipOnEmpty||!e.isEmpty(a)){var c=h("body").data(b.hashKey);c=null==c?b.hash:c[b.caseSensitive?0:1];for(var g=b.caseSensitive?a:a.toLowerCase(),f=g.length-1,k=0;0<=f;--f)k+=g.charCodeAt(f);k!=c&&e.addMessage(d,b.message,a)}},compare:function(a,d,b,c){if(!b.skipOnEmpty||!e.isEmpty(a)){if(void 0===b.compareAttribute)c=b.compareValue;else{var g=h("#"+b.compareAttribute);g.length||(g=c.find('[name="'+b.compareAttributeName+'"]'));c=g.val()}"number"===b.type&&(a=
a?parseFloat(a):0,c=c?parseFloat(c):0);switch(b.operator){case "==":c=a==c;break;case "===":c=a===c;break;case "!=":c=a!=c;break;case "!==":c=a!==c;break;case ">":c=a>c;break;case ">=":c=a>=c;break;case "<":c=a<c;break;case "<=":c=a<=c;break;default:c=!1}c||e.addMessage(d,b.message,a)}},ip:function(a,d,b){if(!b.skipOnEmpty||!e.isEmpty(a)){var c=null,g=null,f=(new RegExp(b.ipParsePattern)).exec(a);f&&(c=f[1]||null,a=f[2],g=f[4]||null);!0===b.subnet&&null===g?e.addMessage(d,b.messages.noSubnet,a):!1===
b.subnet&&null!==g?e.addMessage(d,b.messages.hasSubnet,a):!1===b.negation&&null!==c?e.addMessage(d,b.messages.message,a):6==(-1===a.indexOf(":")?4:6)?((new RegExp(b.ipv6Pattern)).test(a)||e.addMessage(d,b.messages.message,a),b.ipv6||e.addMessage(d,b.messages.ipv6NotAllowed,a)):((new RegExp(b.ipv4Pattern)).test(a)||e.addMessage(d,b.messages.message,a),b.ipv4||e.addMessage(d,b.messages.ipv4NotAllowed,a))}}};return e}(jQuery);