(window.webpackJsonp=window.webpackJsonp||[]).push([[21,3,10],{495:function(t,e,l){var content=l(505);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(37).default)("e79ab990",content,!0,{sourceMap:!1})},496:function(t,e,l){t.exports=l.p+"img/angle-up.07b1cc6.svg"},503:function(t,e,l){var content=l(511);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(37).default)("117d2e71",content,!0,{sourceMap:!1})},504:function(t,e,l){"use strict";l(495)},505:function(t,e,l){var n=l(36)(!1);n.push([t.i,".skill{background:#fff;padding:24px;box-shadow:inset 0 -1px 0 rgba(0,0,0,.05)}.skill:hover .skill__title-menu{opacity:.4}.skill__title{display:flex;justify-content:space-between}.skill__title-spoiler-control{display:flex;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.skill__title-menu{margin-left:auto;opacity:0;transition:.1s;cursor:pointer}.skill__title-menu-content{display:flex;padding:8px;flex-direction:column;align-items:flex-start}.skill__title-menu:hover{opacity:1!important}.skill__title:hover{opacity:.8}.skill__title-arrow{width:22px;height:22px;cursor:pointer;opacity:.8;margin-right:4px}.skill__title-arrow--reverse{transform:rotate(180deg)}.skill__title-header{font-weight:500;font-size:20px}.skill__info{margin-left:24px;margin-top:16px}.skill__desc{color:#666}.skill__desc,.skill__knowlage-base{margin-bottom:24px}.skill__approve-title,.skill__knowlage-base-title{font-weight:600;font-size:16px;margin-bottom:8px}.approve-list__item{padding:8px 0;line-height:22px;max-width:800px}",""]),t.exports=n},506:function(t,e,l){var content=l(513);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(37).default)("ff44ac10",content,!0,{sourceMap:!1})},507:function(t,e,l){"use strict";l.r(e);var n,o=l(51),r=l(27),d=l(497),c={components:{SkillCheckList:l(498).default,SkillCheckListAdd:d.default},data:function(){return{isHidden:!0,menuIsShown:!1}},props:{isEditor:!1,skill:{default:function(){return[{}]}}},mounted:function(){},watch:{},methods:{deleteSkill:function(){var t=this;this.$apollo.mutate({mutation:Object(r.a)(n||(n=Object(o.a)(["\n            mutation MyMutation($skill_id: uuid!) {\n              delete_skill(where: { id: { _eq: $skill_id } }) {\n                affected_rows\n              }\n            }\n          "]))),variables:{skill_id:this.skill.id}}).then((function(){t.$message({message:"Навык удален",type:"success"}),t.$router.go(t.$router.currentRoute)}))}}},_=(l(504),l(17)),component=Object(_.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"skill"},[n("div",{staticClass:"skill__title"},[n("div",{staticClass:"skill__title-spoiler-control",on:{click:function(e){t.isHidden=!t.isHidden}}},[n("div",{staticClass:"skill__title-arrow",class:{"skill__title-arrow--reverse":t.isHidden}},[n("img",{attrs:{src:l(496),alt:""}})]),t._v(" "),n("div",{staticClass:"skill__title-header"},[t._v(t._s(t.skill.name))])]),t._v(" "),t.isEditor?n("el-popover",{attrs:{placement:"bottom",width:"80"},model:{value:t.menuIsShown,callback:function(e){t.menuIsShown=e},expression:"menuIsShown"}},[n("div",{staticClass:"skill__title-menu-content"},[n("el-link",{attrs:{type:"info"}},[t._v("Изменить")]),t._v(" "),n("el-link",{attrs:{type:"danger"},on:{click:t.deleteSkill}},[t._v("Удалить")])],1),t._v(" "),n("div",{staticClass:"skill__title-menu",attrs:{slot:"reference"},slot:"reference"},[n("i",{staticClass:"el-icon-more",attrs:{slot:"reference"},slot:"reference"})])]):t._e()],1),t._v(" "),t.isHidden?t._e():n("div",{staticClass:"skill__info"},[n("div",{staticClass:"skill__desc"},[t._v(t._s(t.skill.description))]),t._v(" "),t._m(0),t._v(" "),n("div",{staticClass:"skill__approve"},[n("div",{staticClass:"skill__approve-title"},[t._v("\n        "+t._s(t.skill.approve_skill_method.name)+"\n      ")]),t._v(" "),n("div",{staticClass:"skill__approve-list"},[n("div",{staticClass:"approve-list"},t._l(t.skill.approve_skill_check_items,(function(e){return n("div",{key:e.id,staticClass:"approve-list__item"},[t._v("\n            "+t._s(e.name)+"\n          ")])})),0)])])])])}),[function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"skill__knowlage-base"},[l("div",{staticClass:"skill__knowlage-base-title"},[t._v("База знаний")])])}],!1,null,null,null);e.default=component.exports},509:function(t,e,l){t.exports=l.p+"img/save.4b6cb5e.svg"},510:function(t,e,l){"use strict";l(503)},511:function(t,e,l){var n=l(36)(!1);n.push([t.i,".add-skill-group{display:flex;align-items:center;margin-bottom:16px}.add-skill-group__input{font-size:24px;line-height:28px;font-weight:600;background:transparent;border:none}.add-skill-group__input::-moz-placeholder{color:#aaa}.add-skill-group__input:-ms-input-placeholder{color:#aaa}.add-skill-group__input::placeholder{color:#aaa}.add-skill-group__input:focus{outline:none}.add-skill-group__btn{cursor:pointer;opacity:.7}.add-skill-group__btn:hover{opacity:1}",""]),t.exports=n},512:function(t,e,l){"use strict";l(506)},513:function(t,e,l){var n=l(36)(!1);n.push([t.i,".skill-group__title-menu{opacity:0;transition:.2s;width:24px;height:24px;font-size:16px}.skill-group__title{font-size:24px;line-height:33px;font-weight:600;margin-bottom:16px;display:flex;justify-content:space-between;cursor:pointer;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.skill-group__title:hover .skill-group__title-menu{opacity:.4}.skill-group__title-arrow,.skill-group__title-spoiler{display:flex;align-items:center}.skill-group__title-arrow{width:29px;height:29px;cursor:pointer;opacity:.8;margin-right:4px;justify-content:space-around}.skill-group__title-arrow--reverse{transform:rotate(180deg)}.skill-group__skills-list{background:#fff;box-shadow:0 0 0 1px rgba(0,8,49,.05),0 6px 3px rgba(0,23,83,.02),0 30px 50px rgba(0,57,202,.04);border-radius:20px;overflow:hidden}",""]),t.exports=n},515:function(t,e,l){"use strict";l.r(e);var n,o=l(51),r=l(27),d={props:{teamId:""},data:function(){return{isLoading:!1,skillGroupName:""}},methods:{saveSkillGroup:function(){var t=this;""!==this.skillGroupName?this.$apollo.mutate({mutation:Object(r.a)(n||(n=Object(o.a)(["\n              mutation saveSkillGroup($name: String!, $team_id: String!) {\n                insert_skill_groups(\n                  objects: { name: $name, team_id: $team_id }\n                ) {\n                  affected_rows\n                }\n              }\n            "]))),variables:{name:this.skillGroupName,team_id:this.teamId}}).then((function(data){t.isLoading=!1,console.log(data),t.$message({message:"Группа Навыков добавлен. Нужно пробросить событие для обновления списка",type:"success"}),t.$emit("skillGroupAdded")})):this.$message({message:"Пустое поле",type:"warning"})}}},c=(l(510),l(17)),component=Object(c.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"add-skill-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.skillGroupName,expression:"skillGroupName"}],staticClass:"add-skill-group__input",attrs:{placeholder:"Новая группа навыков",type:"text"},domProps:{value:t.skillGroupName},on:{input:function(e){e.target.composing||(t.skillGroupName=e.target.value)}}}),t._v(" "),t.skillGroupName.length?n("img",{staticClass:"add-skill-group__btn",attrs:{src:l(509),alt:""},on:{click:t.saveSkillGroup}}):t._e()])}),[],!1,null,null,null);e.default=component.exports},516:function(t,e,l){"use strict";l.r(e);var n=l(174),o={data:function(){return{isHidden:!1,menuIsShown:!1}},props:{isEditor:Boolean,teamId:String,skillGroup:{default:function(){return[{}]}}},mounted:function(){},watch:{},methods:{deleteSkillGroup:function(){var t=this;this.$apollo.mutate({mutation:n.c,variables:{skill_group_id:this.skillGroup.id}}).then((function(){t.$message({message:"Группа навыков удалена",type:"success"}),t.$router.go(t.$router.currentRoute)}))},skillJustApdated:function(){this.$router.go(this.$router.currentRoute)}}},r=(l(512),l(17)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.skillGroup.skills.length>0||t.isEditor?n("div",{staticClass:"skill-group"},[n("div",{staticClass:"skill-group__title"},[n("div",{staticClass:"skill-group__title-spoiler",on:{click:function(e){t.isHidden=!t.isHidden}}},[t._v("\n      "+t._s(t.skillGroup.name)+"\n      "),n("div",{staticClass:"skill-group__title-arrow",class:{"skill__title-arrow--reverse":t.isHidden}},[n("img",{attrs:{src:l(496),alt:""}})])]),t._v(" "),t.isEditor?n("el-popover",{attrs:{placement:"bottom",width:"80"},model:{value:t.menuIsShown,callback:function(e){t.menuIsShown=e},expression:"menuIsShown"}},[n("div",{staticClass:"skill-group__title-menu-content"},[n("el-link",{attrs:{type:"info"}},[t._v("Изменить")]),t._v(" "),n("el-link",{attrs:{type:"danger"},on:{click:t.deleteSkillGroup}},[t._v("Удалить")])],1),t._v(" "),n("div",{staticClass:"skill-group__title-menu",attrs:{slot:"reference"},slot:"reference"},[n("i",{staticClass:"el-icon-more",attrs:{slot:"reference"},slot:"reference"})])]):t._e()],1),t._v(" "),t.isHidden?t._e():n("div",{staticClass:"skill-group__skills-list"},[t._l(t.skillGroup.skills,(function(e){return n("div",{key:e.id},[n("skill",{attrs:{skill:e,isEditor:t.isEditor}})],1)})),t._v(" "),t.isEditor?n("add-skill",{attrs:{skillGroupId:t.skillGroup.id,teamId:t.teamId},on:{skillAdded:t.skillJustApdated}}):t._e()],2)]):t._e()}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Skill:l(507).default,AddSkill:l(514).default})},523:function(t,e,l){var content=l(544);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(37).default)("3dca7b9b",content,!0,{sourceMap:!1})},543:function(t,e,l){"use strict";l(523)},544:function(t,e,l){var n=l(36)(!1);n.push([t.i,".skill-map__skill-group{margin-bottom:32px}.skill-map__skills-list{background:#fff;padding:12px 0;box-shadow:0 0 0 1px rgba(0,8,49,.05),0 6px 3px rgba(0,23,83,.02),0 30px 50px rgba(0,57,202,.04);border-radius:20px;overflow:hidden}",""]),t.exports=n},561:function(t,e,l){"use strict";l.r(e);var n,o=l(51),r=l(12),d=(l(58),l(27)),c=l(514),_=l(515),k=l(507),m=l(516),f={components:{addSkill:c.default,AddSkillGroup:_.default,Skill:k.default,SkillGroup:m.default},nhostAuth:!0,middleware:"hasTeam",layout:"service",data:function(){return{teamId:this.$nhost.auth.getClaim("x-hasura-default-team-id"),isEditor:!1,skills:"",skillCheckList:[]}},mounted:function(){this.isEditor="editor"===this.$nhost.auth.getClaim("x-hasura-default-role")},methods:{skillJustApdated:function(){this.$router.go(this.$router.currentRoute)},info:function(){},getSkills:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.$apollo.query({query:Object(d.a)(n||(n=Object(o.a)(["\n            query getSkills {\n              skill_groups {\n                skills {\n                  id\n                  name\n                  description\n                  weight\n                  approve_skill_method {\n                    id\n                    name\n                    description\n                  }\n                  approve_skill_check_items {\n                    id\n                    name\n                  }\n                }\n                id\n                name\n              }\n            }\n          "])))}).then((function(e){var data=e.data;t.isLoading=!1,console.log(data),t.skills=data}));case 3:case"end":return e.stop()}}),e)})))()}},fetch:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.getSkills();case 1:case"end":return e.stop()}}),e)})))()},props:{userTeam:{default:function(){return{teamName:"",teamId:""}}}}},v=(l(543),l(17)),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{},[t.skills?l("div",{staticClass:"skill-map"},t._l(t.skills.skill_groups,(function(e){return l("div",{key:e.id,staticClass:"skill-map__skill-group"},[l("skill-group",{attrs:{isEditor:t.isEditor,teamId:t.teamId,skillGroup:e}})],1)})),0):t._e(),t._v(" "),t.isEditor?l("div",{staticClass:"add-skill-group"},[l("add-skill-group",{attrs:{teamId:t.teamId},on:{skillGroupAdded:t.skillJustApdated}})],1):t._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{SkillGroup:l(516).default,AddSkillGroup:l(515).default})}}]);