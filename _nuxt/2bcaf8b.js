(window.webpackJsonp=window.webpackJsonp||[]).push([[0,8,9],{493:function(e,t,o){var content=o(500);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(37).default)("75d02f9c",content,!0,{sourceMap:!1})},494:function(e,t,o){var content=o(502);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(37).default)("0631acf4",content,!0,{sourceMap:!1})},497:function(e,t,o){"use strict";o.r(t);var n=o(211),l=o.n(n),r=(o(16),o(33),o(43),o(304),o(210),{data:function(){return{}},props:{gradeLavel:{default:function(){return[{id:"1",name:""}]}}},mounted:function(){this.updateInfo(this.gradeLavel)},watch:{gradeLavel:function(e){this.updateInfo(e)}},methods:{updateInfo:function(e){var t=[];e.forEach((function(element){element.name&&t.push({name:element.name})})),console.log(t),this.$emit("updateInfo",t)},remove:function(e,data){var t=e.parent,o=t.data.children||t.data,n=o.findIndex((function(e){return e.id===data.id}));o.splice(n,1)},allowDrop:function(e,t,o){return!t.data.name||"inner"!==o},allowDrag:function(e){return""!==e.name},renderContent:function(e,t){var o=this,n=t.node,data=t.data,r=(t.store,n.parent),d=(r.data.children||r.data).findIndex((function(e){return e.id===data.id}));return e("span",{class:n.parent.data.length===d+1&&0===data.name.length?"custom-tree-node-add":"custom-tree-node"},[e("input",l()([{on:{input:[function(e){e.target.composing||o.$set(data,"name",e.target.value)},function(){return o.changeName(n,data)}]},class:"custom-tree-node__name",attrs:{placeholder:"Добавить"},domProps:{value:data.name}},{directives:[{name:"model",value:data.name,modifiers:{}}]}])),e("span",{class:"custom-tree-node__remove"},[e("i",{class:"el-icon-delete",on:{click:function(){return o.remove(n,data)}}})])])},changeName:function(e,data){var t=e.parent,o=(t.data.children||t.data).findIndex((function(e){return e.id===data.id}));if(e.parent.data.length===o+1){var n={id:Date.now(),name:""};e.parent.data.push(n)}this.updateInfo(e.parent.data)}}}),d=(o(499),o(17)),component=Object(d.a)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"skill-check-list"},[o("el-tree",{attrs:{data:e.gradeLavel,"node-key":"id","default-expand-all":"",draggable:"","show-checkbox":!1,"allow-drop":e.allowDrop,"allow-drag":e.allowDrag,"render-content":e.renderContent,"expand-on-click-node":!1}})],1)}),[],!1,null,null,null);t.default=component.exports},498:function(e,t,o){"use strict";o.r(t);var n=o(211),l=o.n(n),r=(o(16),o(33),o(43),o(304),o(210),{data:function(){return{}},props:{gradeLavel:{default:function(){return[{id:"1",name:""}]}}},mounted:function(){this.updateInfo(this.gradeLavel)},watch:{gradeLavel:function(e){this.updateInfo(e)}},methods:{updateInfo:function(e){var t=[];e.forEach((function(element){element.name&&t.push({name:element.name})})),console.log(t),this.$emit("updateInfo",t)},remove:function(e,data){var t=e.parent,o=t.data.children||t.data,n=o.findIndex((function(e){return e.id===data.id}));o.splice(n,1)},allowDrop:function(e,t,o){return!t.data.name||"inner"!==o},allowDrag:function(e){return""!==e.name},renderContent:function(e,t){var o=this,n=t.node,data=t.data,r=(t.store,n.parent),d=(r.data.children||r.data).findIndex((function(e){return e.id===data.id}));return e("span",{class:n.parent.data.length===d+1?"custom-tree-node-add":"custom-tree-node"},[e("input",l()([{on:{input:[function(e){e.target.composing||o.$set(data,"name",e.target.value)},function(){return o.changeName(n,data)}]},class:"custom-tree-node__name",attrs:{contenteditable:!0,placeholder:"Добавить"},domProps:{value:data.name}},{directives:[{name:"model",value:data.name,modifiers:{}}]}])),e("span",{class:"custom-tree-node__remove"},[e("i",{class:"el-icon-delete",on:{click:function(){return o.remove(n,data)}}})])])},changeName:function(e,data){var t=e.parent,o=(t.data.children||t.data).findIndex((function(e){return e.id===data.id}));if(e.parent.data.length===o+1){var n={id:Date.now(),name:""};e.parent.data.push(n)}this.updateInfo(e.parent.data)}}}),d=(o(501),o(17)),component=Object(d.a)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"skill-check-list"},[o("el-tree",{attrs:{data:e.gradeLavel,"node-key":"id","default-expand-all":"",draggable:"","show-checkbox":!1,"allow-drop":e.allowDrop,"allow-drag":e.allowDrag,"render-content":e.renderContent,"expand-on-click-node":!1}})],1)}),[],!1,null,null,null);t.default=component.exports},499:function(e,t,o){"use strict";o(493)},500:function(e,t,o){var n=o(36)(!1);n.push([e.i,".skill-check-list .el-tree-node{margin-bottom:4px}.skill-check-list .el-tree-node__content:hover{background-color:transparent!important}.skill-check-list .inline-input{width:100%}.skill-check-list .el-tree-node.is-current .custom-tree-node-add:before{display:none}.skill-check-list .custom-tree-node-add{position:relative;font-size:16px;line-height:28px;cursor:text}.skill-check-list .custom-tree-node-add:after{content:\"\";position:absolute;width:22px;height:22px;background-color:#f2f2f2;background-position:50%;background-repeat:no-repeat;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='16' height='16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12.666 7.333h-4v-4a.667.667 0 10-1.333 0v4h-4a.667.667 0 000 1.333h4v4a.667.667 0 101.333 0v-4h4a.667.667 0 100-1.333z' fill='%23999'/%3E%3C/svg%3E\");left:-24px;top:2px;border-radius:80px}.skill-check-list .custom-tree-node-add .el-icon-delete{display:none}.skill-check-list .custom-tree-node-add .custom-tree-node__name{padding-right:70px;z-index:10;position:relative}.skill-check-list .add-tree-item{height:40px;line-height:40px;width:100%;position:relative}.skill-check-list .add-tree-item:before{content:\"Добавить\";position:absolute;color:#999}.skill-check-list [contenteditable]:focus{outline:0 solid transparent}.skill-check-list .el-tree-node__content{height:32px;cursor:-webkit-grab;cursor:grab}.skill-check-list .el-tree-node__content:hover .el-icon-delete{opacity:.6}.skill-check-list .custom-tree-node{position:relative;font-size:16px;line-height:28px;width:100%}.skill-check-list .custom-tree-node .el-icon-delete{cursor:pointer;transition:.2s;opacity:0}.skill-check-list .custom-tree-node .el-icon-delete:hover{opacity:.8}.skill-check-list .custom-tree-node__name{cursor:text;margin-right:8px;font-size:16px;border:none;background:transparent;width:100%;padding-left:4px}.skill-check-list .custom-tree-node__name:hover{opacity:.9}.skill-check-list .custom-tree-node__remove{position:absolute;right:4px}.skill-check-list .custom-tree-node:before{content:\"\";position:absolute;width:22px;height:22px;background-color:#f2f2f2;background-position:50%;background-repeat:no-repeat;left:-24px;top:3px;border-radius:80px}",""]),e.exports=n},501:function(e,t,o){"use strict";o(494)},502:function(e,t,o){var n=o(36)(!1);n.push([e.i,".skill-check-list .el-tree-node{margin-bottom:4px}.skill-check-list .el-tree-node__content:hover{background-color:transparent!important}.skill-check-list .inline-input{width:100%}.skill-check-list .el-tree-node.is-current .custom-tree-node-add:before{display:none}.skill-check-list .custom-tree-node-add{position:relative;font-size:16px;line-height:28px;cursor:text}.skill-check-list .custom-tree-node-add:after{content:\"\";position:absolute;width:22px;height:22px;background-color:#f2f2f2;background-position:50%;background-repeat:no-repeat;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='16' height='16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12.666 7.333h-4v-4a.667.667 0 10-1.333 0v4h-4a.667.667 0 000 1.333h4v4a.667.667 0 101.333 0v-4h4a.667.667 0 100-1.333z' fill='%23999'/%3E%3C/svg%3E\");left:-24px;top:2px;border-radius:80px}.skill-check-list .custom-tree-node-add .el-icon-delete{display:none}.skill-check-list .custom-tree-node-add .custom-tree-node__name{padding-right:70px;z-index:10;position:relative}.skill-check-list .add-tree-item{height:40px;line-height:40px;width:100%;position:relative}.skill-check-list .add-tree-item:before{content:\"Добавить\";position:absolute;color:#999}.skill-check-list [contenteditable]:focus{outline:0 solid transparent}.skill-check-list .el-tree-node__content{height:32px;cursor:-webkit-grab;cursor:grab}.skill-check-list .el-tree-node__content:hover .el-icon-delete{opacity:.6}.skill-check-list .custom-tree-node{position:relative;font-size:16px;line-height:28px;width:100%}.skill-check-list .custom-tree-node .el-icon-delete{cursor:pointer;transition:.2s;opacity:0}.skill-check-list .custom-tree-node .el-icon-delete:hover{opacity:.8}.skill-check-list .custom-tree-node__name{cursor:text;margin-right:8px;font-size:16px;border:none;background:transparent;width:100%;padding-left:4px}.skill-check-list .custom-tree-node__name:hover{opacity:.9}.skill-check-list .custom-tree-node__remove{position:absolute;right:4px}.skill-check-list .custom-tree-node:before{content:\"\";position:absolute;width:22px;height:22px;background-color:#f2f2f2;background-position:50%;background-repeat:no-repeat;left:-24px;top:3px;border-radius:80px}",""]),e.exports=n},514:function(e,t,o){"use strict";o.r(t);var n,l=o(51),r=(o(71),o(38),o(72),o(43),o(27)),d={components:{skillCheckList:o(497).default},props:{teamId:"",skillGroupId:""},data:function(){return{formIsShow:!1,isLoading:!1,taskdesc:"",skillCheckList:[],ruleForm:{name:"",weight:100,description:"",approveSkillMethod:"e56c0c44-5b41-438b-a577-3048eb67a1d7"},rules:{name:[{required:!0,message:"Заполните название",trigger:"blur"}],description:[{required:!0,message:"Заполните описание",trigger:"blur"}]}}},methods:{skillCheckListUpdateHandler:function(e){this.skillCheckList=e},skillCheckListWithAproveMethod:function(){var e=this;return this.skillCheckList.map((function(element){return element.approve_skill_method_id=e.ruleForm.approveSkillMethod,element}))},logout:function(){console.log(this.$nhost.auth.getJWTToken())},formatTooltip:function(e){return e/100},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.isLoading=!0,console.log({description:t.ruleForm.description,name:t.ruleForm.name,team_id:t.teamId,weight:t.ruleForm.weight/100,approve_skill_method_id:t.ruleForm.approveSkillMethod,skill_group_id:t.skillGroupId,aprove_skill_check_item:t.skillCheckListWithAproveMethod()}),t.$apollo.mutate({mutation:Object(r.a)(n||(n=Object(l.a)(["\nmutation MyMutation(\n                  $description: String!\n                  $name: String!\n                  $team_id: String!\n                  $weight: numeric!\n                  $approve_skill_method_id: uuid!\n                  $skill_group_id: uuid!\n                  $aprove_skill_check_item: [approve_skill_check_items_insert_input!]!\n                ) {\n                  insert_skills(\n                    objects: {\n                      name: $name\n                      description: $description\n                      team_id: $team_id\n                      weight: $weight\n                      approve_skill_method_id: $approve_skill_method_id\n                      skill_group_id: $skill_group_id\n                      approve_skill_check_items: {\n                        data: $aprove_skill_check_item\n                      }\n                    }\n                  ) {\n                    affected_rows\n                  }\n                }\n              "]))),variables:{description:t.ruleForm.description,name:t.ruleForm.name,team_id:t.teamId,weight:t.ruleForm.weight/100,approve_skill_method_id:t.ruleForm.approveSkillMethod,skill_group_id:t.skillGroupId,aprove_skill_check_item:t.skillCheckListWithAproveMethod()}}).then((function(){t.isLoading=!1,t.$message({message:"Навык добавлен. Нужно пробросить событие для обновления списка",type:"success"}),t.$emit("skillAdded")}))}))},resetForm:function(e){this.$refs[e].resetFields()}}},c=(o(541),o(17)),component=Object(c.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"add-skill__wrap"},[n("button",{staticClass:"add-skill__add-btn",on:{click:function(t){e.formIsShow=!e.formIsShow}}},[n("img",{staticClass:"add-skill__add-btn-img",attrs:{src:o(540),alt:""}}),e._v("\n    Добавить навык\n  ")]),e._v(" "),e.formIsShow?n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"add-skill"},[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{"label-position":"top",model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[n("div",{staticClass:"add-skill__form-title"},[e._v("Добавление навыка")]),e._v(" "),n("div",{staticClass:"add-skill__desc-group"},[n("el-form-item",{attrs:{prop:"name"}},[n("el-input",{attrs:{placeholder:"Название навыка"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"desc"}},[n("el-input",{attrs:{placeholder:"Описание",type:"textarea"},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1)],1),e._v(" "),n("div",{staticClass:"add-skill__form-subtitle-weigth"},[e._v("Вес навыка")]),e._v(" "),n("div",{staticClass:"add-skill__weigth-group"},[n("el-slider",{attrs:{step:10,"format-tooltip":e.formatTooltip,"show-stops":""},model:{value:e.ruleForm.weight,callback:function(t){e.$set(e.ruleForm,"weight",t)},expression:"ruleForm.weight"}})],1),e._v(" "),n("div",{staticClass:"add-skill__form-subtitle"},[e._v("Оценка навыка")]),e._v(" "),n("el-form-item",{attrs:{prop:"resource"}},[n("el-tabs",{model:{value:e.ruleForm.approveSkillMethod,callback:function(t){e.$set(e.ruleForm,"approveSkillMethod",t)},expression:"ruleForm.approveSkillMethod"}},[n("el-tab-pane",{attrs:{label:"Чеклист",name:"e56c0c44-5b41-438b-a577-3048eb67a1d7"}},[n("skill-check-list",{on:{updateInfo:e.skillCheckListUpdateHandler}})],1),e._v(" "),n("el-tab-pane",{attrs:{label:"Оценка",name:"5166ca8c-e278-49ad-9b4b-045cc2fc48af"}}),e._v(" "),n("el-tab-pane",{attrs:{label:"Задание",name:"f937dae9-66b1-4600-9207-324bb4fbd68e"}},[n("el-input",{attrs:{placeholder:"Опишите задание",type:"textarea"},model:{value:e.taskdesc,callback:function(t){e.taskdesc=t},expression:"taskdesc"}})],1)],1)],1),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Сохранить")]),e._v(" "),n("el-button",{on:{click:function(t){e.formIsShow=!1}}},[e._v("Отмена")])],1)],1):e._e(),e._v(" "),e.formIsShow?n("div",{staticClass:"add-skill__backdrop",on:{click:function(t){e.formIsShow=!e.formIsShow}}}):e._e()])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{SkillCheckList:o(498).default})},522:function(e,t,o){var content=o(542);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(37).default)("441e3471",content,!0,{sourceMap:!1})},540:function(e,t,o){e.exports=o.p+"img/plus-circle.4ae07f3.svg"},541:function(e,t,o){"use strict";o(522)},542:function(e,t,o){var n=o(36)(!1);n.push([e.i,".add-skill{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:100%;max-width:560px;z-index:500000;background:#fff;padding:50px;box-shadow:0 6px 3px rgba(0,0,0,.02),0 30px 50px rgba(0,0,0,.04);border-radius:20px}.add-skill__add-btn{background:transparent;border:none;margin:24px;color:#666;font-size:14px;cursor:pointer;opacity:.8;transition:.1s;display:flex;align-items:center}.add-skill__add-btn-img{margin-right:6px}.add-skill__add-btn:hover{opacity:1}.add-skill__backdrop{top:0;left:0;z-index:400000;position:fixed;width:100%;height:100%;background:rgba(0,0,0,.2)}.add-skill__form-title{margin-bottom:20px;font-size:24px;font-weight:600}.add-skill__form-subtitle{margin-bottom:8px;font-size:20px;font-weight:600}.add-skill__form-subtitle-weigth{font-size:20px;font-weight:600;margin-bottom:0}.add-skill__weigth-group{width:50%;margin-bottom:24px}.add-skill__desc-group{margin-bottom:32px}",""]),e.exports=n}}]);