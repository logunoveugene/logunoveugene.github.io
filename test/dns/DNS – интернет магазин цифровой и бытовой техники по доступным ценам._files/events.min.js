(function(a,b){var c='events';'function'==typeof define&&define.amd?define(c,[],function(){return b({})}):'object'==typeof module&&module.exports?b(module):a[c]=b({})})(this,function(a){function b(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function c(h){return'function'==typeof h}function d(h){return'number'==typeof h}function e(h){return'object'==typeof h&&null!==h}function f(h){return void 0===h}return a.exports=b,b.EventEmitter=b,b.prototype._events=void 0,b.prototype._maxListeners=void 0,b.defaultMaxListeners=10,b.prototype.setMaxListeners=function(h){if(!d(h)||0>h||isNaN(h))throw TypeError('n must be a positive number');return this._maxListeners=h,this},b.prototype.emit=function(h){var j,k,l,o,p,q;if(this._events||(this._events={}),'error'===h&&(!this._events.error||e(this._events.error)&&!this._events.error.length))if(j=arguments[1],j instanceof Error)throw j;else{var r=new Error('Uncaught, unspecified "error" event. ('+j+')');throw r.context=j,r}if(k=this._events[h],f(k))return!1;if(c(k))switch(arguments.length){case 1:k.call(this);break;case 2:k.call(this,arguments[1]);break;case 3:k.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),k.apply(this,o);}else if(e(k))for(o=Array.prototype.slice.call(arguments,1),q=k.slice(),l=q.length,p=0;p<l;p++)q[p].apply(this,o);return!0},b.prototype.addListener=function(h,j){var k;if(!c(j))throw TypeError('listener must be a function');return this._events||(this._events={}),this._events.newListener&&this.emit('newListener',h,c(j.listener)?j.listener:j),this._events[h]?e(this._events[h])?this._events[h].push(j):this._events[h]=[this._events[h],j]:this._events[h]=j,e(this._events[h])&&!this._events[h].warned&&(k=f(this._maxListeners)?b.defaultMaxListeners:this._maxListeners,k&&0<k&&this._events[h].length>k&&(this._events[h].warned=!0,console.error('(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.',this._events[h].length),'function'==typeof console.trace&&console.trace())),this},b.prototype.on=b.prototype.addListener,b.prototype.once=function(h,j){function k(){this.removeListener(h,k),l||(l=!0,j.apply(this,arguments))}if(!c(j))throw TypeError('listener must be a function');var l=!1;return k.listener=j,this.on(h,k),this},b.prototype.removeListener=function(h,j){var k,l,o,p;if(!c(j))throw TypeError('listener must be a function');if(!this._events||!this._events[h])return this;if(k=this._events[h],o=k.length,l=-1,k===j||c(k.listener)&&k.listener===j)delete this._events[h],this._events.removeListener&&this.emit('removeListener',h,j);else if(e(k)){for(p=o;0<p--;)if(k[p]===j||k[p].listener&&k[p].listener===j){l=p;break}if(0>l)return this;1===k.length?(k.length=0,delete this._events[h]):k.splice(l,1),this._events.removeListener&&this.emit('removeListener',h,j)}return this},b.prototype.removeAllListeners=function(h){var j,k;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[h]&&delete this._events[h],this;if(0===arguments.length){for(j in this._events)'removeListener'!==j&&this.removeAllListeners(j);return this.removeAllListeners('removeListener'),this._events={},this}if(k=this._events[h],c(k))this.removeListener(h,k);else if(k)for(;k.length;)this.removeListener(h,k[k.length-1]);return delete this._events[h],this},b.prototype.listeners=function(h){var j;return j=this._events&&this._events[h]?c(this._events[h])?[this._events[h]]:this._events[h].slice():[],j},b.prototype.listenerCount=function(h){if(this._events){var j=this._events[h];if(c(j))return 1;if(j)return j.length}return 0},b.listenerCount=function(h,j){return h.listenerCount(j)},b});